{
  "info": {
    "name": "Backend Proyecto Aula - API Tests",
    "description": "Colecci√≥n completa para probar los endpoints del backend del proyecto universitario. Incluye autenticaci√≥n, gesti√≥n de distribuidores, preventistas, entregadores y m√°s.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "distributorToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "distributorId",
      "value": "",
      "type": "string"
    },
    {
      "key": "presalesId",
      "value": "",
      "type": "string"
    },
    {
      "key": "deliveryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "storeId",
      "value": "",
      "type": "string"
    },
    {
      "key": "productId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "storeToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "presalesToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "01 - Authentication",
      "item": [
        {
          "name": "Login as Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.token) {",
                  "        pm.collectionVariables.set('adminToken', jsonData.token);",
                  "        console.log('‚úÖ Admin token guardado:', jsonData.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"password\",\n  \"rememberMe\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Autentica al usuario admin y guarda el token JWT autom√°ticamente"
          }
        },
        {
          "name": "Login as Distributor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.token) {",
                  "        pm.collectionVariables.set('distributorToken', jsonData.token);",
                  "        console.log('‚úÖ Distributor token guardado:', jsonData.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"ACTUALIZA_CON_USERNAME_DEL_DISTRIBUIDOR\",\n  \"password\": \"ACTUALIZA_CON_PASSWORD_DEL_DISTRIBUIDOR\",\n  \"rememberMe\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Autentica al distribuidor. IMPORTANTE: Actualiza el username y password con las credenciales que recibir√°s al crear el distribuidor en el paso siguiente."
          }
        },
        {
          "name": "Test Authentication",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/test",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "test"]
            },
            "description": "Prueba que el token de autenticaci√≥n funciona correctamente"
          }
        }
      ]
    },
    {
      "name": "02 - Distributors (ADMIN Role)",
      "item": [
        {
          "name": "Create Distributor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.distributor && jsonData.distributor.id) {",
                  "        pm.collectionVariables.set('distributorId', jsonData.distributor.id);",
                  "        console.log('‚úÖ Distributor ID guardado:', jsonData.distributor.id);",
                  "    }",
                  "    if (jsonData.user) {",
                  "        console.log('üìù IMPORTANTE - Guarda estas credenciales del distribuidor:');",
                  "        console.log('   Username:', jsonData.user.username);",
                  "        console.log('   Password:', jsonData.user.password);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"NIT\": 900123456,\n  \"name\": \"Distribuidora Central\",\n  \"phoneNumber\": \"+57 300 123 4567\",\n  \"email\": \"contacto@distcentral.com\",\n  \"direction\": {\n    \"street\": \"Calle 50\",\n    \"number\": \"23-45\",\n    \"neighborhood\": \"Centro\",\n    \"city\": \"Barranquilla\",\n    \"department\": \"Atl√°ntico\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/distributors/register",
              "host": ["{{baseUrl}}"],
              "path": ["distributors", "register"]
            },
            "description": "Crea un nuevo distribuidor. IMPORTANTE: Guarda el username y password que devuelve para usar en 'Login as Distributor'"
          }
        },
        {
          "name": "List All Distributors",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/distributors",
              "host": ["{{baseUrl}}"],
              "path": ["distributors"]
            },
            "description": "Lista todos los distribuidores registrados"
          }
        },
        {
          "name": "Get Distributor by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/distributors/{{distributorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["distributors", "{{distributorId}}"]
            },
            "description": "Obtiene la informaci√≥n de un distribuidor espec√≠fico"
          }
        },
        {
          "name": "Update Distributor",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Distribuidora Central Actualizada\",\n  \"phoneNumber\": \"+57 300 123 9999\",\n  \"email\": \"nuevo@distcentral.com\",\n  \"direction\": {\n    \"street\": \"Calle 51\",\n    \"number\": \"24-46\",\n    \"neighborhood\": \"Centro\",\n    \"city\": \"Barranquilla\",\n    \"department\": \"Atl√°ntico\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/distributors/{{distributorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["distributors", "{{distributorId}}"]
            },
            "description": "Actualiza la informaci√≥n de un distribuidor"
          }
        }
      ]
    },
    {
      "name": "03 - Presales (DISTRIBUTOR Role)",
      "item": [
        {
          "name": "Create Presales",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.presales && jsonData.presales.id) {",
                  "        pm.collectionVariables.set('presalesId', jsonData.presales.id);",
                  "        console.log('‚úÖ Presales ID guardado:', jsonData.presales.id);",
                  "    }",
                  "    if (jsonData.user) {",
                  "        console.log('üìù Credenciales del preventista:');",
                  "        console.log('   Username:', jsonData.user.username);",
                  "        console.log('   Password:', jsonData.user.password);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Juan P√©rez\",\n  \"phoneNumber\": \"+57 310 987 6543\",\n  \"email\": \"juan.perez@distcentral.com\",\n  \"documentType\": \"CC\",\n  \"documentNumber\": 1234567890\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/presales/register",
              "host": ["{{baseUrl}}"],
              "path": ["presales", "register"]
            },
            "description": "Crea un nuevo preventista. Requiere token de distribuidor. Tipos de documento: CC, TI, CE, PASSPORT"
          }
        },
        {
          "name": "List All Presales",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/presales",
              "host": ["{{baseUrl}}"],
              "path": ["presales"]
            },
            "description": "Lista todos los preventistas"
          }
        },
        {
          "name": "Get Presales by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/presales/{{presalesId}}",
              "host": ["{{baseUrl}}"],
              "path": ["presales", "{{presalesId}}"]
            },
            "description": "Obtiene la informaci√≥n de un preventista espec√≠fico"
          }
        },
        {
          "name": "Update Presales",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Juan P√©rez Actualizado\",\n  \"phoneNumber\": \"+57 310 999 9999\",\n  \"email\": \"juan.perez.updated@distcentral.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/presales/{{presalesId}}",
              "host": ["{{baseUrl}}"],
              "path": ["presales", "{{presalesId}}"]
            },
            "description": "Actualiza la informaci√≥n de un preventista"
          }
        }
      ]
    },
    {
      "name": "04 - Deliveries (DISTRIBUTOR Role)",
      "item": [
        {
          "name": "Create Delivery",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.delivery && jsonData.delivery.id) {",
                  "        pm.collectionVariables.set('deliveryId', jsonData.delivery.id);",
                  "        console.log('‚úÖ Delivery ID guardado:', jsonData.delivery.id);",
                  "    }",
                  "    if (jsonData.user) {",
                  "        console.log('üìù Credenciales del entregador:');",
                  "        console.log('   Username:', jsonData.user.username);",
                  "        console.log('   Password:', jsonData.user.password);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Carlos Rodr√≠guez\",\n  \"documentType\": \"CC\",\n  \"documentNumber\": 9876543210,\n  \"phoneNumber\": \"+57 320 456 7890\",\n  \"licenseNumber\": \"LIC123456789\",\n  \"licenseType\": \"B1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/deliveries/register",
              "host": ["{{baseUrl}}"],
              "path": ["deliveries", "register"]
            },
            "description": "Crea un nuevo entregador. Tipos de licencia: A1, A2, A3, A4, B1, B2, B3, C1, C2, C3, C4, D1, D2, D3, D4"
          }
        },
        {
          "name": "List All Deliveries",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/deliveries",
              "host": ["{{baseUrl}}"],
              "path": ["deliveries"]
            },
            "description": "Lista todos los entregadores"
          }
        },
        {
          "name": "Get Delivery by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/deliveries/{{deliveryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["deliveries", "{{deliveryId}}"]
            },
            "description": "Obtiene la informaci√≥n de un entregador espec√≠fico"
          }
        },
        {
          "name": "Update Delivery",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Carlos Rodr√≠guez Actualizado\",\n  \"phoneNumber\": \"+57 320 999 9999\",\n  \"licenseNumber\": \"LIC999999999\",\n  \"licenseType\": \"C1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/deliveries/{{deliveryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["deliveries", "{{deliveryId}}"]
            },
            "description": "Actualiza la informaci√≥n de un entregador"
          }
        }
      ]
    },
    {
      "name": "05 - Stores (ADMIN/DISTRIBUTOR Role)",
      "item": [
        {
          "name": "Create Store (Self-Registration)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.store && jsonData.store.id) {",
                  "        pm.collectionVariables.set('storeId', jsonData.store.id);",
                  "        console.log('‚úÖ Store ID guardado:', jsonData.store.id);",
                  "    }",
                  "    if (jsonData.user) {",
                  "        console.log('üìù Credenciales de la tienda:');",
                  "        console.log('   Username:', jsonData.user.username);",
                  "        console.log('   Password:', jsonData.user.password);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"NIT\": 800234567,\n  \"name\": \"Tienda La Esquina\",\n  \"phoneNumber\": \"+57 305 111 2222\",\n  \"email\": \"contacto@laesquina.com\",\n  \"direction\": {\n    \"street\": \"Calle 80\",\n    \"number\": \"45-67\",\n    \"neighborhood\": \"El Prado\",\n    \"city\": \"Barranquilla\",\n    \"department\": \"Atl√°ntico\"\n  },\n  \"password\": \"MiPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/stores/register",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "register"]
            },
            "description": "Auto-registro de tienda por el due√±o (P√öBLICO - no requiere autenticaci√≥n). Estado: SELF_REGISTERED. Si el NIT ya existe, se indicar√° usar el endpoint de Claim Store."
          }
        },
        {
          "name": "Register Store by Distributor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.store && jsonData.store.id) {",
                  "        pm.collectionVariables.set('storeId', jsonData.store.id);",
                  "        console.log('‚úÖ Store ID guardado:', jsonData.store.id);",
                  "        console.log('üìù Estado de la tienda: PENDING_CLAIM');",
                  "        console.log('üí° El due√±o puede reclamar esta tienda usando el endpoint \"Claim Store\"');",
                  "    }",
                  "    if (jsonData.relationship && jsonData.relationship.internalClientCode) {",
                  "        console.log('üîë Internal Client Code:', jsonData.relationship.internalClientCode);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"NIT\": 800567890,\n  \"name\": \"Supermercado El Ahorro\",\n  \"phoneNumber\": \"+57 315 222 3333\",\n  \"email\": \"contacto@elahorro.com\",\n  \"direction\": {\n    \"street\": \"Carrera 45\",\n    \"number\": \"78-90\",\n    \"neighborhood\": \"Norte\",\n    \"city\": \"Barranquilla\",\n    \"department\": \"Atl√°ntico\"\n  },\n  \"internalClientCode\": \"CLI-2024-001\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/stores/distributor/{{distributorId}}/register",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "distributor", "{{distributorId}}", "register"]
            },
            "description": "Registro de tienda por un distribuidor para uno de sus clientes. Requiere rol ADMIN o DISTRIBUTOR. Estado: PENDING_CLAIM. Incluye internalClientCode para integraci√≥n ERP."
          }
        },
        {
          "name": "Claim Store",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('‚úÖ Tienda reclamada exitosamente!');",
                  "    if (jsonData.storeId) {",
                  "        pm.collectionVariables.set('storeId', jsonData.storeId);",
                  "        console.log('üè™ Store ID:', jsonData.storeId);",
                  "    }",
                  "    if (jsonData.username && jsonData.userId) {",
                  "        console.log('üë§ User ID:', jsonData.userId);",
                  "        console.log('üìù Username:', jsonData.username);",
                  "        console.log('üí° Ahora puedes iniciar sesi√≥n con estas credenciales');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"NIT\": 800567890,\n  \"email\": \"contacto@elahorro.com\",\n  \"password\": \"MiPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/stores/claim",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "claim"]
            },
            "description": "Reclama una tienda registrada por un distribuidor (P√öBLICO - no requiere autenticaci√≥n). Valida NIT + email, crea usuario autom√°ticamente. Estado cambia a: CLAIMED."
          }
        },
        {
          "name": "Login as Store",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.token) {",
                  "        pm.collectionVariables.set('storeToken', jsonData.token);",
                  "        console.log('‚úÖ Store token guardado:', jsonData.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"store_800567890\",\n  \"password\": \"MiPassword123!\",\n  \"rememberMe\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Inicia sesi√≥n como tienda. Actualiza el username (formato: store_{NIT}) y password con las credenciales recibidas al registrarse o reclamar."
          }
        },
        {
          "name": "List All Stores",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/stores",
              "host": ["{{baseUrl}}"],
              "path": ["stores"]
            },
            "description": "Lista todas las tiendas"
          }
        },
        {
          "name": "Get Store by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/stores/{{storeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "{{storeId}}"]
            },
            "description": "Obtiene la informaci√≥n de una tienda espec√≠fica"
          }
        },
        {
          "name": "Update Store",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Tienda La Esquina Actualizada\",\n  \"phoneNumber\": \"+57 305 999 9999\",\n  \"email\": \"nuevo@laesquina.com\",\n  \"direction\": {\n    \"street\": \"Calle 81\",\n    \"number\": \"46-68\",\n    \"neighborhood\": \"El Prado\",\n    \"city\": \"Barranquilla\",\n    \"department\": \"Atl√°ntico\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/stores/{{storeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "{{storeId}}"]
            },
            "description": "Actualiza la informaci√≥n de una tienda"
          }
        },
        {
          "name": "Disable Store",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/stores/{{storeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["stores", "{{storeId}}"]
            },
            "description": "Desactiva una tienda (soft delete)"
          }
        }
      ]
    },
    {
      "name": "06 - Products",
      "item": [
        {
          "name": "Create Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.product && jsonData.product.id) {",
                  "        pm.collectionVariables.set('productId', jsonData.product.id);",
                  "        console.log('‚úÖ Product ID guardado:', jsonData.product.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Coca Cola 2L\",\n   \"price\": 5500.00,\n  \"unit\": \"LITER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["products"]
            },
            "description": "Crea un nuevo producto. Unidades disponibles: UNIT, KILOGRAM, LITER, METER, PACK, BOX"
          }
        },
        {
          "name": "List All Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["products"]
            },
            "description": "Lista todos los productos"
          }
        },
        {
          "name": "Get Product by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["products", "{{productId}}"]
            },
            "description": "Obtiene la informaci√≥n de un producto espec√≠fico"
          }
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Coca Cola 2.5L\",\n  \"price\": 6000.00,\n  \"unit\": \"LITER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["products", "{{productId}}"]
            },
            "description": "Actualiza la informaci√≥n de un producto"
          }
        },
        {
          "name": "Disable Product",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["products", "{{productId}}"]
            },
            "description": "Desactiva un producto (soft delete)"
          }
        }
      ]
    },
    {
      "name": "07 - Catalogs (DISTRIBUTOR/PRESALES Role)",
      "item": [
        {
          "name": "Get My Catalog",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/catalogs",
              "host": ["{{baseUrl}}"],
              "path": ["catalogs"]
            },
            "description": "Obtiene el cat√°logo completo de la distribuidora del usuario autenticado. Funciona con DISTRIBUTOR o PRESALES"
          }
        },
        {
          "name": "Add Category to Catalog",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.category && jsonData.category.id) {",
                  "        pm.collectionVariables.set('categoryId', jsonData.category.id);",
                  "        console.log('‚úÖ Category ID guardado:', jsonData.category.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Bebidas\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/catalogs/categories",
              "host": ["{{baseUrl}}"],
              "path": ["catalogs", "categories"]
            },
            "description": "Agrega una categor√≠a al cat√°logo de la distribuidora. Solo DISTRIBUTOR"
          }
        },
        {
          "name": "Add Product to Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": \"{{productId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/catalogs/categories/{{categoryId}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["catalogs", "categories", "{{categoryId}}", "products"]
            },
            "description": "Agrega un producto existente a una categor√≠a. Solo DISTRIBUTOR"
          }
        },
        {
          "name": "Get Products by Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{distributorToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/catalogs/{{categoryId}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["catalogs", "{{categoryId}}", "products"]
            },
            "description": "Obtiene todos los productos de una categor√≠a espec√≠fica. Funciona con DISTRIBUTOR o PRESALES"
          }
        }
      ]
    },
    {
      "name": "08 - Orders (STORE/PRESALES Role)",
      "item": [
        {
          "name": "Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.order && jsonData.order.id) {",
                  "        pm.collectionVariables.set('orderId', jsonData.order.id);",
                  "        console.log('‚úÖ Order ID guardado:', jsonData.order.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{presalesToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"store_id\": 1,\n  \"distributor_id\": 1,\n  \"presales_id\": null,\n  \"productEntities\": [\n    {\n      \"id\": \"{{productId}}\",\n      \"quantity\": 10\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders/",
              "host": ["{{baseUrl}}"],
              "path": ["orders", ""]
            },
            "description": "Crea un nuevo pedido. Requiere rol STORE o PRESALES. IMPORTANTE: distributor_id es OBLIGATORIO, presales_id es OPCIONAL (null si la tienda pide directamente sin preventista). Actualiza store_id, distributor_id y presales_id con valores reales"
          }
        },
        {
          "name": "List All Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{presalesToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            },
            "description": "Lista todos los pedidos del usuario autenticado"
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{presalesToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            },
            "description": "Obtiene la informaci√≥n de un pedido espec√≠fico"
          }
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{presalesToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            },
            "description": "Cancela un pedido existente"
          }
        }
      ]
    }
  ]
}
